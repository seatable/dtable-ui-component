"use strict";(self.webpackChunkdtable_ui_component=self.webpackChunkdtable_ui_component||[]).push([[569],{"./stories/components/cell-editor/04-single-select-editor.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Demo1:()=>Demo1,Demo2:()=>Demo2,Demo3:()=>Demo3,Demo4:()=>Demo4,__namedExportsOrder:()=>__namedExportsOrder,default:()=>_04_single_select_editor_stories});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react_responsive=__webpack_require__("./node_modules/react-responsive/dist/react-responsive.js"),react_responsive_default=__webpack_require__.n(react_responsive),lang=__webpack_require__("./src/lang/index.js"),EditEditorButton=__webpack_require__("./src/EditEditorButton/index.js"),select_editor=__webpack_require__("./src/select-editor/index.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),SingleSelectEditor=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./src/SingleSelectEditor/index.css"),options={};function _assert_this_initialized(self1){if(void 0===self1)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return self1}function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _get_prototype_of(o){return(_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_set_prototype_of(subClass,superClass)}function _possible_constructor_return(self1,call){return call&&("object"===_type_of(call)||"function"==typeof call)?call:_assert_this_initialized(self1)}function _set_prototype_of(o,p){return(_set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function _is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _create_super(Derived){var hasNativeReflectConstruct=_is_native_reflect_construct();return function _createSuperInternal(){var result,Super=_get_prototype_of(Derived);return result=hasNativeReflectConstruct?Reflect.construct(Super,arguments,_get_prototype_of(this).constructor):Super.apply(this,arguments),_possible_constructor_return(this,result)}}options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default(),injectStylesIntoStyleTag_default()(SingleSelectEditor.A,options),SingleSelectEditor.A&&SingleSelectEditor.A.locals&&SingleSelectEditor.A.locals;var propTypes={isReadOnly:prop_types_default().bool,value:prop_types_default().string,column:prop_types_default().object,onCommit:prop_types_default().func,isSupportNewOption:prop_types_default().bool,onAddNewOption:prop_types_default().func},SingleSelectEditor_SingleSelectEditor=function(_superClass){_inherits(SingleSelectEditor,_superClass);var _super=_create_super(SingleSelectEditor);function SingleSelectEditor(props){_class_call_check(this,SingleSelectEditor),_define_property(_assert_this_initialized(_this=_super.call(this,props)),"onMouseDown",function(e){_this.editorContainer===e.target||_this.editorContainer.contains(e.target)||_this.onClosePopover()}),_define_property(_assert_this_initialized(_this),"formatOption",function(){var newValue=_this.state.newValue;return _this.options.find(function(option){return option.name===newValue})}),_define_property(_assert_this_initialized(_this),"onAddOptionToggle",function(event){if(event.nativeEvent.stopImmediatePropagation(),event.stopPropagation(),!_this.props.isReadOnly){var isPopoverShow=!_this.state.isPopoverShow;if(isPopoverShow){var popoverPosition=_this.caculatePopoverPosition();_this.setState({isPopoverShow:isPopoverShow,popoverPosition:popoverPosition})}else _this.setState({isPopoverShow:isPopoverShow})}}),_define_property(_assert_this_initialized(_this),"onCommit",function(newValue){var updated={};updated[_this.props.column.name]=newValue,_this.props.onCommit(updated)}),_define_property(_assert_this_initialized(_this),"onOptionItemToggle",function(option){var newValue=_this.state.newValue===option.name?"":option.name;_this.setState({newValue:newValue},function(){_this.onCommit(newValue),_this.onClosePopover()})}),_define_property(_assert_this_initialized(_this),"caculatePopoverPosition",function(){var innerHeight=window.innerHeight,_this_editor_getClientRects_=_this.editor.getClientRects()[0],top=_this_editor_getClientRects_.top,height=_this_editor_getClientRects_.height,position={top:height+1,left:0};return innerHeight-(top+height)>200||(position={bottom:height+1,left:0}),position}),_define_property(_assert_this_initialized(_this),"onAddNewOption",function(optionName){_this.props.onAddNewOption(optionName),_this.onClosePopover()}),_define_property(_assert_this_initialized(_this),"onClosePopover",function(){_this.setState({isPopoverShow:!1})}),_define_property(_assert_this_initialized(_this),"setEditorContainerRef",function(editorContainer){_this.editorContainer=editorContainer}),_define_property(_assert_this_initialized(_this),"setEditorRef",function(editor){_this.editor=editor}),_this.state={newValue:props.value,isPopoverShow:!1,popoverPosition:{}};var _this,column=_this.props.column;return _this.options=column.data&&(column.data.options||[]),_this}return _create_class(SingleSelectEditor,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("mousedown",this.onMouseDown)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("mousedown",this.onMouseDown)}},{key:"render",value:function render(){var _this_state=this.state,isPopoverShow=_this_state.isPopoverShow,popoverPosition=_this_state.popoverPosition,option=this.formatOption(),options=this.options,selectedOptions=option?[option]:[];return react.createElement("div",{ref:this.setEditorContainerRef,className:"dtable-ui-single-select-editor"},react.createElement("div",{ref:this.setEditorRef,className:option?"":"d-inline-block",onClick:this.onAddOptionToggle},option?react.createElement("div",{className:"dtable-ui-single-select-option-container"},react.createElement(select_editor.Lz,{option:option})):react.createElement(EditEditorButton.A,{text:(0,lang.JK)("Add_an_option")})),isPopoverShow&&react.createElement(react.Fragment,null,react.createElement(react_responsive_default(),{query:"(min-width: 768px)"},react.createElement(select_editor.sQ,{popoverPosition:popoverPosition,options:options,selectedOptions:selectedOptions,onOptionItemToggle:this.onOptionItemToggle,isSupportNewOption:this.props.isSupportNewOption,onAddNewOption:this.onAddNewOption})),react.createElement(react_responsive_default(),{query:"(max-width: 767.8px)"},react.createElement(select_editor.Cc,{isReadOnly:this.props.isReadOnly,value:[this.state.newValue],column:this.props.column,options:options,onOptionItemToggle:this.onOptionItemToggle,isShowRemoveIcon:!0,isSupportNewOption:this.props.isSupportNewOption,onAddNewOption:this.onAddNewOption,onClosePopover:this.onClosePopover}))))}}]),SingleSelectEditor}(react.Component);_define_property(SingleSelectEditor_SingleSelectEditor,"defaultProps",{isReadOnly:!1,value:""}),SingleSelectEditor_SingleSelectEditor.propTypes=propTypes,SingleSelectEditor_SingleSelectEditor.__docgenInfo={description:"",methods:[{name:"onMouseDown",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"formatOption",docblock:null,modifiers:[],params:[],returns:null},{name:"onAddOptionToggle",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"onCommit",docblock:null,modifiers:[],params:[{name:"newValue",optional:!1,type:null}],returns:null},{name:"onOptionItemToggle",docblock:null,modifiers:[],params:[{name:"option",optional:!1,type:null}],returns:null},{name:"caculatePopoverPosition",docblock:null,modifiers:[],params:[],returns:null},{name:"onAddNewOption",docblock:null,modifiers:[],params:[{name:"optionName",optional:!1,type:null}],returns:null},{name:"onClosePopover",docblock:null,modifiers:[],params:[],returns:null},{name:"setEditorContainerRef",docblock:null,modifiers:[],params:[{name:"editorContainer",optional:!1,type:null}],returns:null},{name:"setEditorRef",docblock:null,modifiers:[],params:[{name:"editor",optional:!1,type:null}],returns:null}],displayName:"SingleSelectEditor",props:{isReadOnly:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},value:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},column:{description:"",type:{name:"object"},required:!1},onCommit:{description:"",type:{name:"func"},required:!1},isSupportNewOption:{description:"",type:{name:"bool"},required:!1},onAddNewOption:{description:"",type:{name:"func"},required:!1}}};var column1_1={key:"0000",type:"single-select",name:"state",data:{options:[{name:"低",color:"#D8FAFF",textColor:"#212529",borderColor:"#B4E4E9",id:"66905"},{name:"中",color:"#46A1FD",textColor:"#FFFFFF",borderColor:"#3C8FE4",id:"193"},{name:"高",color:"#DC82D2",textColor:"#FFFFFF",borderColor:"#D166C5",id:"20948"}]}},column2_1={key:"256713",type:"single-select",name:"state",data:{options:[{name:"小",color:"#D8FAFF",textColor:"#212529",borderColor:"#B4E4E9",id:"893289"},{name:"中",color:"#D7E8FF",textColor:"#212529",borderColor:"#BAD1E9",id:"138031"},{name:"大",color:"#B7CEF9",textColor:"#212529",id:"853367",borderColor:"#96B2E1"}]}};let _04_single_select_editor_stories={title:"Editors/single-select-editor",component:SingleSelectEditor_SingleSelectEditor,tags:["autodocs"],decorators:[function(Story,context){return react.createElement("div",null,context.parameters.title&&react.createElement("h1",null,context.parameters.title),context.parameters.subTitle&&react.createElement("p",{className:"storybook-sub"},context.parameters.subTitle),react.createElement(Story,null))}],parameters:{title:"",subTitle:""}};var Demo1={args:{isReadOnly:!1,value:"",column:column1_1,onCommit:function(updated){(0,dist.XI)("onCommit")(updated)}},parameters:{subTitle:""}},Demo2={args:{isReadOnly:!1,value:"",column:column2_1,onCommit:function(updated){(0,dist.XI)("onCommit")(updated)}},parameters:{subTitle:""}},Demo3={args:{isReadOnly:!1,value:"66905",column:column1_1,onCommit:function(updated){(0,dist.XI)("onCommit")(updated)}},parameters:{subTitle:""}},Demo4={args:{isReadOnly:!1,value:"893289",column:column2_1,onCommit:function(updated){(0,dist.XI)("onCommit")(updated)}},parameters:{subTitle:""}};Demo1.parameters={...Demo1.parameters,docs:{...Demo1.parameters?.docs,source:{originalSource:"{\n  args: {\n    isReadOnly: false,\n    value: value1_1,\n    column: column1_1,\n    onCommit: updated => {\n      action('onCommit')(updated);\n    }\n  },\n  parameters: {\n    subTitle: ''\n  }\n}",...Demo1.parameters?.docs?.source}}},Demo2.parameters={...Demo2.parameters,docs:{...Demo2.parameters?.docs,source:{originalSource:"{\n  args: {\n    isReadOnly: false,\n    value: value2_1,\n    column: column2_1,\n    onCommit: updated => {\n      action('onCommit')(updated);\n    }\n  },\n  parameters: {\n    subTitle: ''\n  }\n}",...Demo2.parameters?.docs?.source}}},Demo3.parameters={...Demo3.parameters,docs:{...Demo3.parameters?.docs,source:{originalSource:"{\n  args: {\n    isReadOnly: false,\n    value: value1_2,\n    column: column1_1,\n    onCommit: updated => {\n      action('onCommit')(updated);\n    }\n  },\n  parameters: {\n    subTitle: ''\n  }\n}",...Demo3.parameters?.docs?.source}}},Demo4.parameters={...Demo4.parameters,docs:{...Demo4.parameters?.docs,source:{originalSource:"{\n  args: {\n    isReadOnly: false,\n    value: value2_2,\n    column: column2_1,\n    onCommit: updated => {\n      action('onCommit')(updated);\n    }\n  },\n  parameters: {\n    subTitle: ''\n  }\n}",...Demo4.parameters?.docs?.source}}};let __namedExportsOrder=["Demo1","Demo2","Demo3","Demo4"]},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./src/SingleSelectEditor/index.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,`.dtable-ui-single-select-editor {
  position: relative;
}

.dtable-ui-single-select-option-container {
  height: 40px;
  padding: 10px 5px;
  border-radius: 3px;
  cursor: pointer;
}

.dtable-ui-single-select-option-container:hover {
  background-color: #f5f5f5;
}
`,"",{version:3,sources:["webpack://./src/SingleSelectEditor/index.css"],names:[],mappings:"AAAA;EACE,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,kBAAkB;EAClB,eAAe;AACjB;;AAEA;EACE,yBAAyB;AAC3B",sourcesContent:[".dtable-ui-single-select-editor {\n  position: relative;\n}\n\n.dtable-ui-single-select-option-container {\n  height: 40px;\n  padding: 10px 5px;\n  border-radius: 3px;\n  cursor: pointer;\n}\n\n.dtable-ui-single-select-option-container:hover {\n  background-color: #f5f5f5;\n}\n"],sourceRoot:""}]);let __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);
//# sourceMappingURL=components-cell-editor-04-single-select-editor-stories.8feb5730.iframe.bundle.js.map