"use strict";(self.webpackChunkdtable_ui_component=self.webpackChunkdtable_ui_component||[]).push([[758],{"./stories/components/cell-editor/05-multiple-select-editor.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Demo1:()=>Demo1,Demo2:()=>Demo2,Demo3:()=>Demo3,Demo4:()=>Demo4,__namedExportsOrder:()=>__namedExportsOrder,default:()=>_05_multiple_select_editor_stories});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react_responsive=__webpack_require__("./node_modules/react-responsive/dist/react-responsive.js"),react_responsive_default=__webpack_require__.n(react_responsive),lang=__webpack_require__("./src/lang/index.js"),EditEditorButton=__webpack_require__("./src/EditEditorButton/index.js"),select_editor=__webpack_require__("./src/select-editor/index.js"),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),MultipleSelectEditor=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./src/MultipleSelectEditor/index.css"),options={};function _assert_this_initialized(self1){if(void 0===self1)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return self1}function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _get_prototype_of(o){return(_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_set_prototype_of(subClass,superClass)}function _possible_constructor_return(self1,call){return call&&("object"===_type_of(call)||"function"==typeof call)?call:_assert_this_initialized(self1)}function _set_prototype_of(o,p){return(_set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function _is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _create_super(Derived){var hasNativeReflectConstruct=_is_native_reflect_construct();return function _createSuperInternal(){var result,Super=_get_prototype_of(Derived);return result=hasNativeReflectConstruct?Reflect.construct(Super,arguments,_get_prototype_of(this).constructor):Super.apply(this,arguments),_possible_constructor_return(this,result)}}options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default(),injectStylesIntoStyleTag_default()(MultipleSelectEditor.A,options),MultipleSelectEditor.A&&MultipleSelectEditor.A.locals&&MultipleSelectEditor.A.locals;var propTypes={isReadOnly:prop_types_default().bool,value:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().array]),column:prop_types_default().object,onCommit:prop_types_default().func,isSupportNewOption:prop_types_default().bool,onAddNewOption:prop_types_default().func},MultipleSelectEditor_MultipleSelectEditor=function(_superClass){_inherits(MultipleSelectEditor,_superClass);var _super=_create_super(MultipleSelectEditor);function MultipleSelectEditor(props){_class_call_check(this,MultipleSelectEditor),_define_property(_assert_this_initialized(_this=_super.call(this,props)),"onMouseDown",function(e){_this.editorContainer===e.target||_this.editorContainer.contains(e.target)||_this.onClosePopover()}),_define_property(_assert_this_initialized(_this),"getFormattedOptions",function(){var newValue=_this.state.newValue;return Array.isArray(newValue)&&newValue.length>0?newValue.map(function(option_id){return _this.options.find(function(option){return option.id===option_id})}).filter(function(option){return!!option}):[]}),_define_property(_assert_this_initialized(_this),"onAddOptionToggle",function(event){if(event.nativeEvent.stopImmediatePropagation(),event.stopPropagation(),!_this.props.isReadOnly){var isPopoverShow=!_this.state.isPopoverShow;if(isPopoverShow){var popoverPosition=_this.caculatePopoverPosition();_this.setState({isPopoverShow:isPopoverShow,popoverPosition:popoverPosition})}else _this.setState({isPopoverShow:isPopoverShow})}}),_define_property(_assert_this_initialized(_this),"onCommit",function(newValue){var updated={};updated[_this.props.column.key]=newValue,_this.props.onCommit(updated)}),_define_property(_assert_this_initialized(_this),"onOptionItemToggle",function(option){var newValue=_this.state.newValue.slice(),optionIndex=newValue.findIndex(function(option_id){return option_id===option.id});-1!==optionIndex?newValue.splice(optionIndex,1):newValue.push(option.id),_this.setState({newValue:newValue},function(){_this.onCommit(newValue)})}),_define_property(_assert_this_initialized(_this),"onDeleteOption",function(option){var newValue=_this.state.newValue.slice(),optionIndex=newValue.findIndex(function(option_id){return option_id===option.id});newValue.splice(optionIndex,1),_this.setState({newValue:newValue},function(){_this.onCommit(newValue)})}),_define_property(_assert_this_initialized(_this),"onAddNewOption",function(optionName){_this.props.onAddNewOption(optionName),_this.onClosePopover()}),_define_property(_assert_this_initialized(_this),"caculatePopoverPosition",function(){var innerHeight=window.innerHeight,_this_editor_getClientRects_=_this.editor.getClientRects()[0],top=_this_editor_getClientRects_.top,height=_this_editor_getClientRects_.height,position={top:height+1,left:0};return innerHeight-(top+height)>200||(position={bottom:height+1,left:0}),position}),_define_property(_assert_this_initialized(_this),"onClosePopover",function(){_this.setState({isPopoverShow:!1})}),_define_property(_assert_this_initialized(_this),"setEditorContainerRef",function(editorContainer){_this.editorContainer=editorContainer}),_define_property(_assert_this_initialized(_this),"setEditorRef",function(editor){_this.editor=editor}),_this.state={newValue:Array.isArray(props.value)?props.value:[],isPopoverShow:!1,popoverPosition:{}};var _this,column=_this.props.column;return _this.options=column.data&&(column.data.options||[]),_this}return _create_class(MultipleSelectEditor,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("mousedown",this.onMouseDown)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("mousedown",this.onMouseDown)}},{key:"render",value:function render(){var _this=this,_this_state=this.state,isPopoverShow=_this_state.isPopoverShow,popoverPosition=_this_state.popoverPosition,options=this.options,selectedOptions=this.getFormattedOptions();return react.createElement("div",{ref:this.setEditorContainerRef,className:"cell-editor dtable-ui-multiple-select-editor"},react.createElement("div",{ref:this.setEditorRef,className:"dtable-ui-select-editor-container",onClick:this.onAddOptionToggle},0===selectedOptions.length&&react.createElement(EditEditorButton.A,{text:(0,lang.JK)("Add_an_option")}),0!==selectedOptions.length&&selectedOptions.map(function(option){return react.createElement(select_editor.Lz,{key:option.id,option:option,isShowRemoveIcon:!0,onDeleteSelectOption:_this.onDeleteOption})})),isPopoverShow&&react.createElement(react.Fragment,null,react.createElement(react_responsive_default(),{query:"(min-width: 768px)"},react.createElement(select_editor.sQ,{popoverPosition:popoverPosition,options:options,selectedOptions:selectedOptions,onOptionItemToggle:this.onOptionItemToggle,isSupportNewOption:this.props.isSupportNewOption,onAddNewOption:this.onAddNewOption})),react.createElement(react_responsive_default(),{query:"(max-width: 767.8px)"},react.createElement(select_editor.Cc,{isReadOnly:this.props.isReadOnly,value:this.state.newValue,column:this.props.column,options:options,onOptionItemToggle:this.onOptionItemToggle,isShowRemoveIcon:!0,isSupportNewOption:this.props.isSupportNewOption,onAddNewOption:this.onAddNewOption,onClosePopover:this.onClosePopover}))))}}]),MultipleSelectEditor}(react.Component);_define_property(MultipleSelectEditor_MultipleSelectEditor,"defaultProps",{isReadOnly:!1,value:[]}),MultipleSelectEditor_MultipleSelectEditor.propTypes=propTypes,MultipleSelectEditor_MultipleSelectEditor.__docgenInfo={description:"",methods:[{name:"onMouseDown",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"getFormattedOptions",docblock:null,modifiers:[],params:[],returns:null},{name:"onAddOptionToggle",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"onCommit",docblock:null,modifiers:[],params:[{name:"newValue",optional:!1,type:null}],returns:null},{name:"onOptionItemToggle",docblock:null,modifiers:[],params:[{name:"option",optional:!1,type:null}],returns:null},{name:"onDeleteOption",docblock:null,modifiers:[],params:[{name:"option",optional:!1,type:null}],returns:null},{name:"onAddNewOption",docblock:null,modifiers:[],params:[{name:"optionName",optional:!1,type:null}],returns:null},{name:"caculatePopoverPosition",docblock:null,modifiers:[],params:[],returns:null},{name:"onClosePopover",docblock:null,modifiers:[],params:[],returns:null},{name:"setEditorContainerRef",docblock:null,modifiers:[],params:[{name:"editorContainer",optional:!1,type:null}],returns:null},{name:"setEditorRef",docblock:null,modifiers:[],params:[{name:"editor",optional:!1,type:null}],returns:null}],displayName:"MultipleSelectEditor",props:{isReadOnly:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},value:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"union",value:[{name:"string"},{name:"array"}]},required:!1},column:{description:"",type:{name:"object"},required:!1},onCommit:{description:"",type:{name:"func"},required:!1},isSupportNewOption:{description:"",type:{name:"bool"},required:!1},onAddNewOption:{description:"",type:{name:"func"},required:!1}}};var column1_1={key:"0000",type:"multiple-select",name:"state",data:{options:[{id:"1111",name:"未开始",color:"red"},{id:"2222",name:"开始",color:"blue"},{id:"3333",name:"结束",color:"green"}]}},column2_1={key:"256713",type:"multiple-select",name:"state",data:{options:[{id:"256713",name:"待开始",color:"#EED5FF"},{name:"进行中",color:"#D7E8FF",textColor:"#212529",id:"839569"},{name:"评审",color:"#FFFDCF",id:"954270"},{name:"已完成",color:"#DDFFE6",textColor:"#212529",id:"686249"},{id:"669117",name:"需要设计稿",color:"#FFFDCF"}]}};let _05_multiple_select_editor_stories={title:"Editors/multiple-select-editor",component:MultipleSelectEditor_MultipleSelectEditor,tags:["autodocs"],decorators:[function(Story,context){return react.createElement("div",null,context.parameters.title&&react.createElement("h1",null,context.parameters.title),context.parameters.subTitle&&react.createElement("p",{className:"storybook-sub"},context.parameters.subTitle),react.createElement(Story,null))}],parameters:{title:"",subTitle:""}};var Demo1={args:{isReadOnly:!1,value:[],column:column1_1,onCommit:function(updated){(0,dist.XI)("onCommit")(updated)}},parameters:{subTitle:""}},Demo2={args:{isReadOnly:!1,value:[],column:column2_1,onCommit:function(updated){(0,dist.XI)("onCommit")(updated)}},parameters:{subTitle:""}},Demo3={args:{isReadOnly:!1,value:["1111"],column:column1_1,onCommit:function(updated){(0,dist.XI)("onCommit")(updated)}},parameters:{subTitle:""}},Demo4={args:{isReadOnly:!1,value:["1111"],column:column2_1,onCommit:function(updated){(0,dist.XI)("onCommit")(updated)}},parameters:{subTitle:""}};Demo1.parameters={...Demo1.parameters,docs:{...Demo1.parameters?.docs,source:{originalSource:"{\n  args: {\n    isReadOnly: false,\n    value: value1_1,\n    column: column1_1,\n    onCommit: updated => {\n      action('onCommit')(updated);\n    }\n  },\n  parameters: {\n    subTitle: ''\n  }\n}",...Demo1.parameters?.docs?.source}}},Demo2.parameters={...Demo2.parameters,docs:{...Demo2.parameters?.docs,source:{originalSource:"{\n  args: {\n    isReadOnly: false,\n    value: value2_1,\n    column: column2_1,\n    onCommit: updated => {\n      action('onCommit')(updated);\n    }\n  },\n  parameters: {\n    subTitle: ''\n  }\n}",...Demo2.parameters?.docs?.source}}},Demo3.parameters={...Demo3.parameters,docs:{...Demo3.parameters?.docs,source:{originalSource:"{\n  args: {\n    isReadOnly: false,\n    value: value1_2,\n    column: column1_1,\n    onCommit: updated => {\n      action('onCommit')(updated);\n    }\n  },\n  parameters: {\n    subTitle: ''\n  }\n}",...Demo3.parameters?.docs?.source}}},Demo4.parameters={...Demo4.parameters,docs:{...Demo4.parameters?.docs,source:{originalSource:"{\n  args: {\n    isReadOnly: false,\n    value: value2_2,\n    column: column2_1,\n    onCommit: updated => {\n      action('onCommit')(updated);\n    }\n  },\n  parameters: {\n    subTitle: ''\n  }\n}",...Demo4.parameters?.docs?.source}}};let __namedExportsOrder=["Demo1","Demo2","Demo3","Demo4"]},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./src/MultipleSelectEditor/index.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,`.dtable-ui-multiple-select-editor {
  position: relative;
}

.dtable-ui-select-editor-container {
  display: inline-block;
  height: 30px;
  padding: 0 10px;
}
`,"",{version:3,sources:["webpack://./src/MultipleSelectEditor/index.css"],names:[],mappings:"AAAA;EACE,kBAAkB;AACpB;;AAEA;EACE,qBAAqB;EACrB,YAAY;EACZ,eAAe;AACjB",sourcesContent:[".dtable-ui-multiple-select-editor {\n  position: relative;\n}\n\n.dtable-ui-select-editor-container {\n  display: inline-block;\n  height: 30px;\n  padding: 0 10px;\n}\n"],sourceRoot:""}]);let __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);
//# sourceMappingURL=components-cell-editor-05-multiple-select-editor-stories.7fbd6eb3.iframe.bundle.js.map