"use strict";(self.webpackChunkdtable_ui_component=self.webpackChunkdtable_ui_component||[]).push([[603],{"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./src/ImageFormatter/index.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__),_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_8_use_1_css_cell_formatter_css__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./src/css/cell-formatter.css"),___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.i(_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_8_use_1_css_cell_formatter_css__WEBPACK_IMPORTED_MODULE_2__.A),___CSS_LOADER_EXPORT___.push([module.id,`.dtable-ui.image-formatter {
  display: flex;
  align-items: center;
}

.dtable-ui.image-formatter .image-item {
  display: inline-block;
  height: 28px;
  width: 28px;
  margin-right: 4px;
  border: 1px solid #f0f0f0;
}

.dtable-ui.image-formatter .image-item:hover {
  border: 1px solid #c9c9c9;
}

.dtable-ui.image-formatter .image-item-count {
  display: inline-block;
  padding: 0 3px;
  min-width: 14px;
  line-height: 14px;
  font-size: 12px;
  border-radius: 6px;
  text-align: center;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: #fff;
  background-color: #999;
  -webkit-transform: translate(-50%, 8px) scale(.8);
  transform: translate(-50%, 8px) scale(.8);
}
`,"",{version:3,sources:["webpack://./src/ImageFormatter/index.css"],names:[],mappings:"AAEA;EACE,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,qBAAqB;EACrB,YAAY;EACZ,WAAW;EACX,iBAAiB;EACjB,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,qBAAqB;EACrB,cAAc;EACd,eAAe;EACf,iBAAiB;EACjB,eAAe;EACf,kBAAkB;EAClB,kBAAkB;EAClB,uBAAuB;EACvB,mBAAmB;EACnB,WAAW;EACX,sBAAsB;EACtB,iDAAiD;EACjD,yCAAyC;AAC3C",sourcesContent:["@import url('../css/cell-formatter.css');\n\n.dtable-ui.image-formatter {\n  display: flex;\n  align-items: center;\n}\n\n.dtable-ui.image-formatter .image-item {\n  display: inline-block;\n  height: 28px;\n  width: 28px;\n  margin-right: 4px;\n  border: 1px solid #f0f0f0;\n}\n\n.dtable-ui.image-formatter .image-item:hover {\n  border: 1px solid #c9c9c9;\n}\n\n.dtable-ui.image-formatter .image-item-count {\n  display: inline-block;\n  padding: 0 3px;\n  min-width: 14px;\n  line-height: 14px;\n  font-size: 12px;\n  border-radius: 6px;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: #fff;\n  background-color: #999;\n  -webkit-transform: translate(-50%, 8px) scale(.8);\n  transform: translate(-50%, 8px) scale(.8);\n}\n"],sourceRoot:""}]);let __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./src/Loading/index.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,`/** loading **/
@-moz-keyframes loading {
  0% {
    -moz-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -moz-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@-webkit-keyframes loading {
  0% {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loading {
  0% {
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -moz-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

.loading-icon {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 2px solid #eee;
  border-left-color: #aaa;
  border-radius: 50%;
  -moz-animation: loading 0.9s infinite linear;
  -webkit-animation: loading 0.9s infinite linear;
  animation: loading 0.9s infinite linear;
}

.loading-tip {
  display: block;
  margin: 0 auto;
}
`,"",{version:3,sources:["webpack://./src/Loading/index.css"],names:[],mappings:"AAAA,cAAc;AACd;EACE;IACE,4BAA4B;IAC5B,uBAAuB;EACzB;EACA;IACE,8BAA8B;IAC9B,yBAAyB;EAC3B;AACF;;AAEA;EACE;IACE,+BAA+B;IAC/B,uBAAuB;EACzB;EACA;IACE,iCAAiC;IACjC,yBAAyB;EAC3B;AACF;;AAEA;EACE;IACE,4BAA4B;IAC5B,2BAA2B;IAC3B,+BAA+B;IAC/B,uBAAuB;EACzB;EACA;IACE,8BAA8B;IAC9B,6BAA6B;IAC7B,iCAAiC;IACjC,yBAAyB;EAC3B;AACF;;AAEA;EACE,qBAAqB;EACrB,WAAW;EACX,YAAY;EACZ,sBAAsB;EACtB,uBAAuB;EACvB,kBAAkB;EAClB,4CAA4C;EAC5C,+CAA+C;EAC/C,uCAAuC;AACzC;;AAEA;EACE,cAAc;EACd,cAAc;AAChB",sourcesContent:["/** loading **/\n@-moz-keyframes loading {\n  0% {\n    -moz-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -moz-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@-webkit-keyframes loading {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loading {\n  0% {\n    -moz-transform: rotate(0deg);\n    -ms-transform: rotate(0deg);\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -moz-transform: rotate(360deg);\n    -ms-transform: rotate(360deg);\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n.loading-icon {\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  border: 2px solid #eee;\n  border-left-color: #aaa;\n  border-radius: 50%;\n  -moz-animation: loading 0.9s infinite linear;\n  -webkit-animation: loading 0.9s infinite linear;\n  animation: loading 0.9s infinite linear;\n}\n\n.loading-tip {\n  display: block;\n  margin: 0 auto;\n}\n"],sourceRoot:""}]);let __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/ImageFormatter/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>src_ImageFormatter_0});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),Loading=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./src/Loading/index.css"),options={};function Loading_Loading(){return react.createElement("span",{className:"loading-icon loading-tip"})}options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default(),injectStylesIntoStyleTag_default()(Loading.A,options),Loading.A&&Loading.A.locals&&Loading.A.locals,Loading_Loading.__docgenInfo={description:"",methods:[],displayName:"Loading"};var getImageThumbnailUrl=function(url,server){return server&&url.indexOf(server)>-1?url.replace("/workspace","/thumbnail/workspace")+"?size=256":url};function _assert_this_initialized(self1){if(void 0===self1)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return self1}function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _get_prototype_of(o){return(_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_set_prototype_of(subClass,superClass)}function _possible_constructor_return(self1,call){return call&&("object"===_type_of(call)||"function"==typeof call)?call:_assert_this_initialized(self1)}function _set_prototype_of(o,p){return(_set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function _is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _create_super(Derived){var hasNativeReflectConstruct=_is_native_reflect_construct();return function _createSuperInternal(){var result,Super=_get_prototype_of(Derived);return result=hasNativeReflectConstruct?Reflect.construct(Super,arguments,_get_prototype_of(this).constructor):Super.apply(this,arguments),_possible_constructor_return(this,result)}}var propTypes={images:prop_types_default().array.isRequired,server:prop_types_default().string,onImageClick:prop_types_default().func},ImagesLazyLoad=function(_React_Component){_inherits(ImagesLazyLoad,_React_Component);var _super=_create_super(ImagesLazyLoad);function ImagesLazyLoad(props){var _this;return _class_call_check(this,ImagesLazyLoad),_define_property(_assert_this_initialized(_this=_super.call(this,props)),"componentDidMount",function(){_this.lazyLoadImages(_this.props)}),_define_property(_assert_this_initialized(_this),"UNSAFE_componentWillReceiveProps",function(nextProps){nextProps.images.toString()!==_this.props.images.toString()&&_this.lazyLoadImages(nextProps)}),_define_property(_assert_this_initialized(_this),"componentWillUnmount",function(){_this.setState=function(state,callback){}}),_define_property(_assert_this_initialized(_this),"lazyLoadImages",function(props){var images=props.images;Array.isArray(images)&&0!==images.length&&_this.setState({images:images,loadedImages:[],loadedCount:0},function(){var server=_this.props.server;images.forEach(function(item,index){var url=getImageThumbnailUrl(item,server);_this.lazyLoadImage(url,function(image){var _this_state=_this.state,loadedCount=_this_state.loadedCount,newImageList=_this_state.loadedImages.slice(0);newImageList[index]=image,_this.setState({loadedCount:loadedCount+1,loadedImages:newImageList})},function(){var loadedCount=_this.state.loadedCount;_this.setState({loadedCount:loadedCount+1})})})})}),_define_property(_assert_this_initialized(_this),"lazyLoadImage",function(url,resolve,reject){if(!url){reject("img path is require");return}var image=new Image;image.onload=function(){resolve(image)},image.onerror=function(e){reject(e)},image.src=url}),_define_property(_assert_this_initialized(_this),"onMouseDown",function(event){event.stopPropagation()}),_define_property(_assert_this_initialized(_this),"onImageClick",function(event,index){event.stopPropagation(),_this.props.onImageClick(index)}),_this.state={images:props.images,loadedImages:[],loadedCount:0},_this}return _create_class(ImagesLazyLoad,[{key:"render",value:function render(){var _this=this,_this_state=this.state,images=_this_state.images,loadedImages=_this_state.loadedImages,loadedCount=_this_state.loadedCount;return Array.isArray(images)&&0!==images.length?images.length>loadedCount?react.createElement("div",{style:{marginLeft:"4px"},className:"d-flex align-items-center"},react.createElement(Loading_Loading,null)):loadedImages.map(function(image,index){return react.createElement("img",{key:index,className:"image-item",src:image.src,onMouseDown:_this.onMouseDown,onClick:function(event){return _this.onImageClick(event,index)},alt:""})}):""}}]),ImagesLazyLoad}(react.Component);ImagesLazyLoad.propTypes=propTypes,ImagesLazyLoad.__docgenInfo={description:"",methods:[{name:"componentDidMount",docblock:null,modifiers:[],params:[],returns:null},{name:"UNSAFE_componentWillReceiveProps",docblock:null,modifiers:[],params:[{name:"nextProps",optional:!1,type:null}],returns:null},{name:"componentWillUnmount",docblock:null,modifiers:[],params:[],returns:null},{name:"lazyLoadImages",docblock:null,modifiers:[],params:[{name:"props",optional:!1,type:null}],returns:null},{name:"lazyLoadImage",docblock:null,modifiers:[],params:[{name:"url",optional:!1,type:null},{name:"resolve",optional:!1,type:null},{name:"reject",optional:!1,type:null}],returns:null},{name:"onMouseDown",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"onImageClick",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null},{name:"index",optional:!1,type:null}],returns:null}],displayName:"ImagesLazyLoad",props:{images:{description:"",type:{name:"array"},required:!0},server:{description:"",type:{name:"string"},required:!1},onImageClick:{description:"",type:{name:"func"},required:!1}}};var index_es=__webpack_require__("./node_modules/@seafile/react-image-lightbox/dist/index.es.js"),isInternalImg=function(url,server){if(url){var currentServer=server||window.dtable&&window.dtable.server;return url.indexOf(currentServer)>-1}};function ImagePreviewerLightbox(props){var imageItems=props.imageItems,imageIndex=props.imageIndex,deleteImage=props.deleteImage,downloadImage=props.downloadImage,onRotateImage=props.onRotateImage,readOnly=props.readOnly,server=props.server,moveToPrevRowImage=props.moveToPrevRowImage,moveToNextRowImage=props.moveToNextRowImage,className=props.className,imageItemsLength=imageItems.length,URL=imageItems[imageIndex],imageTitle=URL?decodeURI(URL.slice(URL.lastIndexOf("/")+1)):"",canRotateImage=onRotateImage&&!readOnly&&!(URL&&".svg"===URL.substr(-4).toLowerCase())&&isInternalImg(URL,server),imageTitleEl=react.createElement("span",{className:"d-flex"},react.createElement("span",{className:"text-truncate"},imageTitle),react.createElement("span",{className:"flex-shrink-0"},"(",imageIndex+1,"/",imageItemsLength,")"));return react.createElement(index_es.default,{wrapperClassName:classnames_default()("dtable-ui-component",className),imageTitle:imageTitleEl,mainSrc:imageItems[imageIndex],nextSrc:imageItems[(imageIndex+1)%imageItemsLength],prevSrc:imageItems[(imageIndex+imageItemsLength-1)%imageItemsLength],onCloseRequest:props.closeImagePopup,onMovePrevRequest:props.moveToPrevImage,onMoveNextRequest:props.moveToNextImage,onClickMoveUp:moveToPrevRowImage,onClickMoveDown:moveToNextRowImage,onRotateImage:canRotateImage?function(deg){onRotateImage(imageIndex,deg)}:null,onClickDelete:!readOnly&&deleteImage?function(){deleteImage(imageIndex,"previewer")}:null,onClickDownload:downloadImage?function(){downloadImage(URL)}:null})}__webpack_require__("./node_modules/@seafile/react-image-lightbox/style.css"),ImagePreviewerLightbox.propTypes={className:prop_types_default().string,imageItems:prop_types_default().array.isRequired,imageIndex:prop_types_default().number.isRequired,closeImagePopup:prop_types_default().func.isRequired,moveToPrevImage:prop_types_default().func.isRequired,moveToNextImage:prop_types_default().func.isRequired,downloadImage:prop_types_default().func,deleteImage:prop_types_default().func,onRotateImage:prop_types_default().func,readOnly:prop_types_default().bool,server:prop_types_default().string,moveToPrevRowImage:prop_types_default().func,moveToNextRowImage:prop_types_default().func};let src_ImagePreviewerLightbox=ImagePreviewerLightbox;ImagePreviewerLightbox.__docgenInfo={description:"",methods:[],displayName:"ImagePreviewerLightbox",props:{className:{description:"",type:{name:"string"},required:!1},imageItems:{description:"",type:{name:"array"},required:!0},imageIndex:{description:"",type:{name:"number"},required:!0},closeImagePopup:{description:"",type:{name:"func"},required:!0},moveToPrevImage:{description:"",type:{name:"func"},required:!0},moveToNextImage:{description:"",type:{name:"func"},required:!0},downloadImage:{description:"",type:{name:"func"},required:!1},deleteImage:{description:"",type:{name:"func"},required:!1},onRotateImage:{description:"",type:{name:"func"},required:!1},readOnly:{description:"",type:{name:"bool"},required:!1},server:{description:"",type:{name:"string"},required:!1},moveToPrevRowImage:{description:"",type:{name:"func"},required:!1},moveToNextRowImage:{description:"",type:{name:"func"},required:!1}}};var ImageFormatter=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./src/ImageFormatter/index.css"),ImageFormatter_options={};function ImageFormatter_assert_this_initialized(self1){if(void 0===self1)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return self1}function ImageFormatter_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function ImageFormatter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function ImageFormatter_create_class(Constructor,protoProps,staticProps){return protoProps&&ImageFormatter_defineProperties(Constructor.prototype,protoProps),staticProps&&ImageFormatter_defineProperties(Constructor,staticProps),Constructor}function ImageFormatter_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ImageFormatter_get_prototype_of(o){return(ImageFormatter_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ImageFormatter_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&ImageFormatter_set_prototype_of(subClass,superClass)}function ImageFormatter_possible_constructor_return(self1,call){return call&&("object"===ImageFormatter_type_of(call)||"function"==typeof call)?call:ImageFormatter_assert_this_initialized(self1)}function ImageFormatter_set_prototype_of(o,p){return(ImageFormatter_set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function ImageFormatter_type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function ImageFormatter_is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function ImageFormatter_create_super(Derived){var hasNativeReflectConstruct=ImageFormatter_is_native_reflect_construct();return function _createSuperInternal(){var result,Super=ImageFormatter_get_prototype_of(Derived);return result=hasNativeReflectConstruct?Reflect.construct(Super,arguments,ImageFormatter_get_prototype_of(this).constructor):Super.apply(this,arguments),ImageFormatter_possible_constructor_return(this,result)}}ImageFormatter_options.styleTagTransform=styleTagTransform_default(),ImageFormatter_options.setAttributes=setAttributesWithoutAttributes_default(),ImageFormatter_options.insert=insertBySelector_default().bind(null,"head"),ImageFormatter_options.domAPI=styleDomAPI_default(),ImageFormatter_options.insertStyleElement=insertStyleElement_default(),injectStylesIntoStyleTag_default()(ImageFormatter.A,ImageFormatter_options),ImageFormatter.A&&ImageFormatter.A.locals&&ImageFormatter.A.locals;var ImageFormatter_ImageFormatter=function(_superClass){ImageFormatter_inherits(ImageFormatter,_superClass);var _super=ImageFormatter_create_super(ImageFormatter);function ImageFormatter(props){var _this;return ImageFormatter_class_call_check(this,ImageFormatter),ImageFormatter_define_property(ImageFormatter_assert_this_initialized(_this=_super.call(this,props)),"onImageClick",function(index){_this.props.isSupportPreview&&_this.setState({isPreviewImage:!0,previewImageIndex:index})}),ImageFormatter_define_property(ImageFormatter_assert_this_initialized(_this),"closeImagePopup",function(){_this.props.isSupportPreview&&(_this.props.onCloseCallback&&_this.props.onCloseCallback(),_this.setState({isPreviewImage:!1,previewImageIndex:-1}))}),ImageFormatter_define_property(ImageFormatter_assert_this_initialized(_this),"movePrev",function(){var images=_this.props.value;_this.setState(function(prevState){return{previewImageIndex:(prevState.previewImageIndex+images.length-1)%images.length}})}),ImageFormatter_define_property(ImageFormatter_assert_this_initialized(_this),"moveNext",function(){var images=_this.props.value;_this.setState(function(prevState){return{previewImageIndex:(prevState.previewImageIndex+1)%images.length}})}),ImageFormatter_define_property(ImageFormatter_assert_this_initialized(_this),"downloadImage",function(imageItemUrl){_this.props.downloadImage&&_this.props.downloadImage(imageItemUrl)}),ImageFormatter_define_property(ImageFormatter_assert_this_initialized(_this),"deleteImage",function(index){_this.props.deleteImage(index)}),ImageFormatter_define_property(ImageFormatter_assert_this_initialized(_this),"onRotateImage",function(index,degree){_this.props.rotateImage(index,degree)}),_this.state={isPreviewImage:!1,previewImageIndex:-1},_this.canDelete=props.deleteImage&&!props.readOnly,_this.canRotate=props.rotateImage&&!props.readOnly,_this}return ImageFormatter_create_class(ImageFormatter,[{key:"render",value:function render(){var _this_props=this.props,isSample=_this_props.isSample,value=_this_props.value,server=_this_props.server,containerClassName=_this_props.containerClassName,readOnly=_this_props.readOnly,className=classnames_default()("dtable-ui cell-formatter-container image-formatter",containerClassName),_this_state=this.state,isPreviewImage=_this_state.isPreviewImage,previewImageIndex=_this_state.previewImageIndex;if(!Array.isArray(value)||0===value.length)return null;if(isSample){var url=getImageThumbnailUrl(value[0],server);return react.createElement("div",{className:className},react.createElement("img",{className:"image-item",src:url,alt:""}),1!==value.length&&react.createElement("span",{className:"image-item-count"},"+".concat(value.length)))}return react.createElement(react.Fragment,null,react.createElement("div",{className:className},react.createElement(ImagesLazyLoad,{images:value,server:server,onImageClick:this.onImageClick})),isPreviewImage&&react.createElement(src_ImagePreviewerLightbox,{imageItems:value,imageIndex:previewImageIndex,closeImagePopup:this.closeImagePopup,moveToPrevImage:this.movePrev,moveToNextImage:this.moveNext,deleteImage:this.canDelete?this.deleteImage:null,downloadImage:this.downloadImage,onRotateImage:this.canRotate?this.onRotateImage:null,readOnly:readOnly,server:server,moveToPrevRowImage:this.props.moveToPrevRowImage,moveToNextRowImage:this.props.moveToNextRowImage}))}}]),ImageFormatter}(react.Component);ImageFormatter_define_property(ImageFormatter_ImageFormatter,"defaultProps",{isSample:!1,isSupportPreview:!1,readOnly:!0,value:[],server:"",containerClassName:""}),ImageFormatter_ImageFormatter.propTypes={isSample:prop_types_default().bool,readOnly:prop_types_default().bool,isSupportPreview:prop_types_default().bool,value:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().array]),server:prop_types_default().string,containerClassName:prop_types_default().string,deleteImage:prop_types_default().func,downloadImage:prop_types_default().func,rotateImage:prop_types_default().func,moveToPrevRowImage:prop_types_default().func,moveToNextRowImage:prop_types_default().func,onCloseCallback:prop_types_default().func};let src_ImageFormatter_0=ImageFormatter_ImageFormatter;ImageFormatter_ImageFormatter.__docgenInfo={description:"",methods:[{name:"onImageClick",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"closeImagePopup",docblock:null,modifiers:[],params:[],returns:null},{name:"movePrev",docblock:null,modifiers:[],params:[],returns:null},{name:"moveNext",docblock:null,modifiers:[],params:[],returns:null},{name:"downloadImage",docblock:null,modifiers:[],params:[{name:"imageItemUrl",optional:!1,type:null}],returns:null},{name:"deleteImage",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"onRotateImage",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null},{name:"degree",optional:!1,type:null}],returns:null}],displayName:"ImageFormatter",props:{isSample:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isSupportPreview:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},readOnly:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},value:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"union",value:[{name:"string"},{name:"array"}]},required:!1},server:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},containerClassName:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},deleteImage:{description:"",type:{name:"func"},required:!1},downloadImage:{description:"",type:{name:"func"},required:!1},rotateImage:{description:"",type:{name:"func"},required:!1},moveToPrevRowImage:{description:"",type:{name:"func"},required:!1},moveToNextRowImage:{description:"",type:{name:"func"},required:!1},onCloseCallback:{description:"",type:{name:"func"},required:!1}}}}}]);
//# sourceMappingURL=603.33ccc3fc.iframe.bundle.js.map